<nav class="navbar navbar-expand-lg navbar-light bg-header">
  <div class="container">
    <div class="row" style="width: 100%">
      <div class="col-sm-8 hd1">
        <a class="navbar-brand" href="/" style="margin-left: 20px; color: #FFF;"> {{ title }} </a>
      </div>
      <div class="col-sm-4 hd1">
        <div class="company-email"><i class="fa fa-phone-square" aria-hidden="true"
            style="color: #FFF;margin-left: 9px; "></i> 1900000000 </div>
      </div>
    </div>
  </div>
</nav>

<div id="step0" style="height: 100%" *ngIf="is0FormGroup">
  <div class="LandingPage" id="OpenAccountPersonalInfor">
    <div class="container">
      <form id="submitForm" action="/dang-ky-tai-khoan/step2" method="post">
        <input type="hidden" name="token" value="">
        <div class="row" style="margin-top: 4%; width: 100%; margin-left: 0px;" id="openAccountRowStep0">
          <div class="col-sm-3 d-none d-lg-block" style="display: contents">
            <div style="margin-right: -15px">
              <img src="./assets/img/open-account.png">
            </div>
          </div>
          <div class="col-sm-9 col-lg-9 col-xl-9 contentright-step0 rounded" style="width: 100%">
            <div style="margin-top: 35px">
              <h4>Mở tài khoản trực tuyến</h4>
            </div>
            <div class="text-note-step0">Chào mừng Quý khách đăng ký mở tài khoản trực tuyến. Để bắt đầu đăng ký, vui
              lòng chuẩn bị:</div>
            <div class="text-note-step0">1. CMND hoặc CCCD còn hiệu lực theo quy định.</div>
            <div class="text-note-step0">

              2. Máy tính hoặc Điện thoại có Camera.
              <a href="javascript:void(0)" (click)="CheckCamera()" class="text-primary">Nhấn để kiểm tra.</a>
              <video id="videoTakePhotoFront" width="100%" style="object-fit: cover; margin-top: -85px;display: none;"
                playsinline=""></video>
            </div>
            <div class="text-note-step0">3. Điện thoại di động để nhận OTP.</div>
            <div class="text-note-step0">
              <i>Trình duyệt khuyến nghị: Chrome (Window/Android/MacOS version 10.0.0 trở lên); Safari (iPhone/iPad
                version 12.4.1 trở lên) - Vui lòng mở link trực tiếp tại các trình duyệt khuyến nghị nêu trên</i><br>
            </div>
            <div class="text-note-step0" style="margin-bottom: 20px;">
              <button type="button" (click)="startReg()" class="btn btn-warning content3-step0" style="font-size: 16px;">Bắt đầu</button>
            </div>
          </div>

        </div>
      </form>
    </div>
  </div>
</div>

<div id="step" style="height: 100%" *ngIf="!is0FormGroup">
  <div class="LandingPage" id="OpenAccountPersonalInfor">
    <div class="container">

      <div class="row">
        <div class="col-sm-2"></div>
        <div class="col-sm-8">
          <h4 style="text-align: center; margin-top: 10px;">Đăng ký tài khoản trực tuyến</h4>
        </div>
        <div class="col-sm-2"></div>
      </div>
      <div class="row">
        <div class="col-sm-2"></div>
        <div class="col-sm-8">
          <div class="d-block d-xl-none" style="margin-bottom: 10px">
            <div>
              <i class="fa fa-user icon-header" aria-hidden="true" style="color: #3F2763 "></i>
              <img src="./assets/img/circle-open-account.png">
              <span class="font-Roboto font-size16" style="color: #766C60"> Thông tin cá nhân</span>
            </div>
          </div>
          <div class="content-header-infor d-none d-xl-block rounded" style="overflow: hidden; ">
            <div class="col-sm-4 content-row-inline header-selected">
              <div class="text-content-infor">
                <i class="fa fa-user icon-header" aria-hidden="true" style="color: #3F2763 "></i>
                <img src="./assets/img/circle-open-account.png">
                <span class="font-Roboto font-size16 color-white"> Thông tin cá nhân</span>
                <div class="triangle-active" style="margin-top: -21%; margin-left: 107%"></div>
                <div class="triangle-active-border" style="margin-left: 228px"></div>
              </div>
            </div>
            <div class="col-sm-4 content-row-inline ">
              <div class="text-content-infor">
                <i class="fa fa-phone-square icon-header" aria-hidden="true" style="color: #3F2763;margin-left: 9px; "></i>
                <img src="./assets/img/circle-open-account.png">
                <span class="font-Roboto font-size16 color-white"> OTP</span>
                <div class="triangle-active  triangle-active1" style="margin-top: -45px; margin-left: 228px; "></div>
                <div class="triangle-active-border  triangle-active-border1" style="margin-left: 228px"></div>
              </div>
            </div>
            <div class="col-sm-4" style="display: contents;">
              <div class="text-content-infor" style="margin-left: 250px; margin-top: -47px;">
                <i class="fa fa-id-card-o icon-header" aria-hidden="true" style="color: #3F2763;margin-left: 7px; "></i>
                <img src="./assets/img/circle-open-account.png">
                <span class="font-Roboto font-size16 color-white"> Đăng ký dịch vụ</span>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-2"></div>
      </div>

      <div class="row" style="margin-left: 7px; margin-right: 8px;">
        <div class="col-sm-2"></div>
        <div class="col-sm-8" style="margin-bottom: 2%">
          <div class="">
            <div class="row">
              <div class="col-sm-12  col-xl-4 bg-white hr-verticle rounded" style="padding-bottom: 10px;">
                <div class="left content-row-inline">

                  <ng-container *ngFor="let item of configSteps; let i = index">
                    <!-- step -->
                    <div class="content-infor-left">
                      <div class="content-row-inline">
                        <div class="ui-icon-circle">
                          <div [ngClass]="{'ui-icon-circle-active': item.isFormGroup, 'ui-icon-circle-success' : item.doneFormGroup}">
                            <strong>{{ i+1 }}</strong>
                          </div>
                        </div>
                      </div>
                      <div class="content-row-inline absolute" style="margin-left: 17px; margin-top: 16px;">
                        <div class="font-Roboto font-size14"> {{ item.title }}</div>
                      </div>
                    </div>
                    <div class="hr-verticle-small"></div>
                  </ng-container>

                </div>
              </div>
              <div class="col-sm-1 col-lg-1 d-block d-xl-none" style="height: 16px"></div>

              <div class="col-sm-12 col-xl-8 bg-white rounded">

                <!-- is1FormGroup -->
                <div *ngIf="is1FormGroup">
                  <form [formGroup]="_1FormGroup">
                    <div>
                      <div style="margin-top: 10px">
                        <div class="font-Roboto">
                          <span>1. Số điện thoại </span>
                          <span class="color-red">(*)</span>
                        </div>
                        <div style="margin-top: 16px">
                          <input maxlength="12" id="mobile" name="mobile" type="text" class="form-control" placeholder="Số điện thoại" formControlName="mobile" required>
                        </div>
                      </div>
                      <div style="margin-top: 24px">
                        <div class="font-Roboto">
                          <span>2. Email </span>
                          <span class="color-red">(*)</span>
                        </div>
                        <div style="margin-top: 16px">
                          <input id="email" name="email" type="text" class="form-control" placeholder="Email" formControlName="email" required>
                        </div>
                      </div>
                    </div>
                    <div style="margin-top: 24px">
                      <div class="font-Roboto">3. Chọn tài khoản số đẹp?</div>
                      <div style="margin-top: 16px">
                        <div class="content-row-inline">
                          <div class="form-check form-check-inline">
                            <input type="checkbox" class="form-check-input" name="chonSDep" [(ngModel)]="checked" formControlName="chonSDep">
                            <label class="form-check-label font-Roboto-normal" for="chonSDep">Tôi muốn chọn tài khoản số đẹp</label>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div style="clear: both;margin-bottom: 10px;"></div>
                  </form>
                </div>

                <!-- is2FormGroup -->
                <div *ngIf="is2FormGroup">
                  <div class="font-Roboto font-size16" style="margin-top: 26px; text-align: center">
                    Xác thực OTP
                  </div>
                  <div class="font-Roboto-normal font-size14" style="margin-top: 12px; text-align: center">
                    <div>Vui lòng nhập mã OTP gồm 6 chữ số đã gửi đến số điện thoại</div>
                    <div style="margin-top: 8px;" id="openAuthOTP_phone">*******$phone </div>
                    <div style="margin-top: 8px;">Thời gian hết hạn: <span id='exp' style=" color: red;font-weight: bold;">
                      </span> giây</div>
                  </div>
                  <div style="margin-top: 24px;text-align:center;">
                    <form [formGroup]="_2FormGroup">
                      <ng-otp-input [config]="conf_otp_input" (onInputChange)="onOtpChange($event)"></ng-otp-input>
                        <input hidden formControlName="otp" [(ngModel)]="otpCorrect" required>
                    </form>
                  </div>
                  <div style="margin-top: 35px; text-align: center; margin-bottom: 20px;">
                    <button class="font-Roboto btn btn-dark" id="resendOtp">Gửi lại OTP</button>
                  </div>
                </div>

                <!-- is3FormGroup -->
                <div *ngIf="is3FormGroup && showStepTkSodep">
                  <div class="font-Roboto font-size16" style="margin-top: 26px;">
                    Chọn Tài Khoản Số Đẹp
                  </div>
                  <div class="font-Roboto-normal font-size14" style="margin-top: 12px;">
                    <table class="table">
                      <thead>
                        <tr>
                          <th scope="col">Mã Gói</th>
                          <th scope="col">Tên Gói</th>
                          <th scope="col">Phí</th>
                          <th scope="col">Ví Dụ</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let item of dataDSachGoiSDep">
                          <td>{{ item.maGoi }}</td>
                          <td>{{ item.tenGoi }}</td>
                          <td>{{ item.phi }}</td>
                          <td>{{ item.gchu }}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>

                  <div style="margin-top: 24px">
                    <form [formGroup]="_3FormGroup">
                      <div class="font-Roboto">
                        <span>Nhập Đuôi Số Tài Khoản Bạn Mong Muốn</span>
                        <span class="color-red">(*)</span>
                      </div>
                      <div style="margin-top: 16px">
                        <input name="soDuoiTaiKhoan" type="text" class="form-control" placeholder="Chọn 4 số cuối" formControlName="soDuoiTaiKhoan">
                      </div>
                      <div style="margin-top: 16px; margin-bottom: 20px;">
                        <button class="font-Roboto btn btn-warning" (click)="chonDuoiSDep(_3FormGroup.value.soDuoiTaiKhoan)">Tìm Số Đẹp</button>
                      </div>
                      <input type="hidden" formControlName="sdep">
                    </form>
                  </div>

                  <div class="font-Roboto-normal font-size14" style="margin-top: 12px;" *ngIf="showStepTkSodep && showResultSDep">
                    <table class="table">
                      <thead>
                        <tr>
                          <th scope="col">Số Tài Khoản</th>
                          <th scope="col">Phí</th>
                          <th scope="col">Chọn Tài Khoản</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let item of dataDSachSDep">
                          <td>{{ item.soTKhoan }}</td>
                          <td>{{ item.phi }}</td>
                          <td><input type="radio" [value]="item.soTKhoan" name="cbSdep" (change)="chonSDepChange($event)" [checked]="cbSdepChecked(item.soTKhoan)"></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>

                <!-- is4FormGroup -->
                <div *ngIf="is4FormGroup">
                  <div style="margin-top: 24px">
                    <form [formGroup]="_4FormGroup">
                      <div class="font-Roboto">
                        <span>Chọn Giấy Tờ Tùy Thân</span>
                        <span class="color-red">(*)</span>
                      </div>

                      <br />
                      <p class="cus-text">Quý khách vui lòng lựa chọn giấy tờ tùy thân. Ưu tiên cung cấp CMND / CCCD.</p>

                      <div style="margin-top: 16px">
                        <div class="custom-control custom-radio">
                          <input type="radio" class="custom-control-input" id="id_cccd" name="idGTTT" value="cccd" formControlName="idGTTT" checked>
                          <label class="custom-control-label" for="id_cccd">CMND / CCCD</label>
                        </div>

                        <div class="custom-control custom-radio">
                          <input type="radio" class="custom-control-input" id="id_pp" name="idGTTT" value="pp" formControlName="idGTTT">
                          <label class="custom-control-label" for="id_pp">Hộ Chiếu</label>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>

                <!-- is5FormGroup -->
                <div *ngIf="is5FormGroup">
                  <form [formGroup]="_5FormGroup">
                    <div>
                      <div class="font-Roboto margin-top: 12px">
                        <span>Chụp/ Tải ảnh mặt trước và sau giấy tờ của quý khách</span>
                      </div>

                      <p>
                        * Quý khách vui lòng cung cấp hình chụp CMND/CCCD hoặc Hộ Chiếu còn hiệu lực, không bị mờ, bóng hoặc mất góc. Thông tin hiển thị đầy
                        đủ và rõ ràng. Các định dạng file được chấp nhận: jpg, jpeg, png. Kích thước tệp tối đa: 10 MB.
                      </p>

                      <div style="margin-top: 24px" *ngIf="_4FormGroup.value.idGTTT == 'cccd'">
                        <div class="font-Roboto">
                          <span>CMND/CCCD mặt trước</span>
                          <span class="color-red">(*)</span>
                        </div>
                        <div style="margin-top: 16px">
                          <div class="cus-webcam" *ngIf="isImgFront">
                            <app-camera (getPicture)="handleImage($event, 'img_front')"></app-camera>
                            <br />
                            <div class="webcam-image" *ngIf="webcamImageFront">
                              <img [src]="webcamImageFront.imageAsDataUrl" />
                            </div>
                          </div>
                        </div>
                      </div>

                      <div style="margin-top: 24px" *ngIf="_4FormGroup.value.idGTTT == 'cccd'">
                        <div class="font-Roboto">
                          <span>CMND/CCCD mặt sau</span>
                          <span class="color-red">(*)</span>
                        </div>
                        <div style="margin-top: 16px">
                          <div class="cus-webcam" *ngIf="isImgBack">
                            <app-camera (getPicture)="handleImage($event, 'img_back')"></app-camera>
                            <br />
                            <div class="webcam-image" *ngIf="webcamImageBack">
                              <img [src]="webcamImageBack.imageAsDataUrl" />
                            </div>
                          </div>
                        </div>
                      </div>

                      <div style="margin-top: 24px" *ngIf="_4FormGroup.value.idGTTT == 'pp'">
                        <div class="font-Roboto">
                          <span>Hộ chiếu</span>
                          <span class="color-red">(*)</span>
                        </div>
                        <div style="margin-top: 16px">
                          <div class="cus-webcam" *ngIf="isImgPP">
                            <app-camera (getPicture)="handleImage($event, 'img_pp')"></app-camera>
                            <br />
                            <div class="webcam-image" *ngIf="webcamImagePP">
                              <img [src]="webcamImagePP.imageAsDataUrl" />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <ng-template #noCameraExist>
                      Thiết bị máy ảnh không khả dụng.
                    </ng-template>

                    <div style="clear: both;margin-bottom: 10px;"></div>
                  </form>
                </div>

                <!-- is6FormGroup -->
                <div *ngIf="is6FormGroup">
                  <div class="font-Roboto font-size16" style="margin-top: 26px; text-align: center">
                    Bạn hãy xác nhận lại thông tin trước khi hoàn tất mở tài khoản.
                  </div>
                  <div style="margin-top: 24px;">

                      <p><b>Số điện thoại:</b>&nbsp; {{ _1FormGroup.value.mobile }}</p>
                      <p><b>Email:</b>&nbsp; {{ _1FormGroup.value.email }}</p>
                      <p><b>Số tài khoản bạn chọn:</b>&nbsp; {{ _3FormGroup.value.sdep }}</p>

                      <ng-container *ngFor="let item of datatGToTThan">
                        <p><b>Số CCCD:</b>&nbsp; {{ item.soCmt }}</p>
                        <p><b>Họ và tên:</b>&nbsp; {{ item.hoVaTen }}</p>
                        <p><b>Quốc tịch:</b>&nbsp; {{ item.quocTich }}</p>
                        <p><b>Năm sinh:</b>&nbsp; {{ item.namSinh }}</p>
                        <p><b>Giới tính:</b>&nbsp; {{ item.gioiTinh2 }}</p>
                        <p><b>Quê quán:</b>&nbsp; {{ item.queQuan }}</p>
                        <p><b>Nơi thường trú:</b>&nbsp; {{ item.noiTru }}</p>
                        <p><b>Ngày cấp:</b>&nbsp; {{ item.ngayCap2 }}</p>
                        <p><b>Ngày hết hạn:</b>&nbsp; {{ item.ngayHetHan }}</p>
                        <p><b>Nơi cấp:</b>&nbsp; {{ item.noiCap }}</p>
                        <p><b>Đặc điểm nhận dạng:</b>&nbsp; {{ item.dacDiemNhanDang }}</p>
                      </ng-container>
                      <p></p>

                  </div>

                  <div style="margin-top: 16px">
                    <div class="content-row-inline">
                      <div class="form-check form-check-inline">
                        <form [formGroup]="_6FormGroup">
                          <input type="checkbox" class="form-check-input" name="xnhanGTTT" formControlName="xnhanGTTT" [(ngModel)]="checked"
                            checked>
                          <label class="form-check-label font-Roboto-normal color-red" for="xnhanGTTT">Đồng ý</label>
                          <p></p>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- is7FormGroup -->
                <div *ngIf="is7FormGroup">
                  <form [formGroup]="_7FormGroup">
                    <div>
                      <div class="font-Roboto margin-top: 12px">
                        <span>Xác thực khuôn mặt</span>
                      </div>

                      <p>
                        * Vui lòng quay video không quá sát camera và cử động gương mặt tự nhiên trong vài giây. Trong trường hợp sử dụng
                        Iphone/IPad, quý khách vui lòng cài đặt theo hướng dẫn để quay video Cài đặt > Safari > Nâng cao > Experimental Features
                        > Media Recorder > True. (version 12.4.1 trở lên)
                      </p>

                      <div style="margin-top: 24px">
                        <div style="margin-top: 16px">
                          <div class="cus-webcam" *ngIf="isImgFace">
                            <app-camera [showbtn]="false" (getPicture)="handleImage($event, 'img_face')"></app-camera>
                          </div>
                        </div>
                      </div>
                    </div>

                    <ng-template #noCameraExist>
                      Thiết bị máy ảnh không khả dụng.
                    </ng-template>

                    <div style="clear: both;margin-bottom: 10px;"></div>
                  </form>
                </div>

                <!-- is8FormGroup -->
                <div *ngIf="is8FormGroup">
                  <form [formGroup]="_8FormGroup">
                    <input type="hidden" formControlName="dVuNHang">
                    <input type="hidden" formControlName="cnhanhGDich">
                  </form>

                  <div class="font-Roboto font-size16" style="margin-top: 26px;">
                    Danh Sách Dịch Vụ Ngân Hàng
                  </div>
                  <div class="font-Roboto-normal font-size14" style="margin-top: 12px;">
                    <table class="table">
                      <thead>
                        <tr>
                          <th scope="col">Mã Dịch Vụ</th>
                          <th scope="col">Tên Dịch Vụ</th>
                          <th scope="col">Chọn Dịch Vụ</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let item of datatDsachDVuNHang">
                          <td>{{ item.maDVu }}</td>
                          <td>{{ item.tenDVu }}</td>
                          <td><input type="radio" [value]="item.maDVu + '|' + item.tenDVu" name="cbDVuNHang" (change)="chonDsachDVuNHang($event)"></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>

                  <div class="font-Roboto font-size16" style="margin-top: 26px;">
                    Danh Sách Chi Nhánh Ngân Hàng
                  </div>
                  <div class="font-Roboto-normal font-size14" style="margin-top: 12px;">
                    <table class="table">
                      <thead>
                        <tr>
                          <th scope="col">Tỉnh thành</th>
                          <th scope="col">Quận / Huyện</th>
                          <th scope="col">Phường / Xã</th>
                          <th scope="col">Chi tiết</th>
                          <th scope="col">Chọn Chi Nhánh</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let item of datatDsachCNhanh">
                          <td>{{ item.tinhThanh }}</td>
                          <td>{{ item.quanHuyen }}</td>
                          <td>{{ item.phuongXa }}</td>
                          <td>{{ item.chiTiet }}</td>
                          <td><input type="radio" [value]="item.tinhThanh + '|' + item.quanHuyen + '|' + item.phuongXa + '|' + item.chiTiet" name="cbCNhanh" (change)="chonDsachCNhanh($event)"></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>

                <!-- isFinishedFormGroup -->
                <div *ngIf="isFinishedFormGroup">
                  <div class="font-Roboto" style="margin-top: 26px; text-align: center; font-size: 36px;">
                    Bạn đã mở tài khoản thành công!
                  </div>
                  <p></p>
                </div>

              </div>
            </div>
            <div class="row">
              <div class="footer-button rounded" style="width: 100%;">
                <button *ngIf="showBackStep" type="button" class="btn btn-secondary btn-back"
                  style="background-color: #3F2763; border-color: #3F2763;" id="backStep" (click)="backStep()">Quay lại</button>
                <button *ngIf="showStepNext" type="button" class="btn btn-warning btn-next" id="stepNext" (click)="stepNext()" [disabled]="!cValid(currIdxStep)">Tiếp tục</button>
              </div>
            </div>

          </div>
        </div>
        <div class="col-sm-2"></div>
      </div>

    </div>
  </div>
</div>
